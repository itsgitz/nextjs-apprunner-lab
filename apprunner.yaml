version: 1.0
runtime: nodejs22
build:
    commands:
        pre-install:
            - echo "Installing dependencies..."
        install:
            - npm ci --production=false
        pre-build:
            - echo "Running build process..."
        build:
            - npm run build
        post-build:
            # Copy static assets to standalone output
            - cp -r public .next/standalone/
            - cp -r .next/static .next/standalone/.next/
run:
    command: node .next/standalone/server.js
    network:
        port: 3000
    env:
        - name: PORT
          value: "3000"
        - name: HOSTNAME
          value: "0.0.0.0"
        - name: NODE_ENV
          value: "production"
